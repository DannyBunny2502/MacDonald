<!DOCTYPE html>
<html lang="ko"xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>

<!-- Bootstrap CSS -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>


<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>

<meta charset="utf-8">
<title>Insert title here</title>
<style>
#formAll {
	margin: 30px;
}

.form-control {
	width: 100%;
	margin: 0px;
}

#buttonGrp {
	float: right;
	margin-right: 350px;
}

#searchBtn {
	float: right;
	margin-right: 350px;
}

#mtrTable {
	margin: 20px;
	width: 80%;
}
/* The Modal (background) */
.modal {
	display: none; /* Hidden by default */
	position: fixed; /* Stay in place */
	z-index: 1; /* Sit on top */
	left: 0;
	top: 0;
	width: 100%; /* Full width */
	height: 300%; /* Full height */
	overflow: auto; /* Enable scroll if needed */
	background-color: rgb(0, 0, 0); /* Fallback color */
	background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
}

/* Modal Content/Box */
.modal-content {
	background-color: #fefefe;
	margin: 15% auto; /* 15% from the top and centered */
	padding: 20px;
	border: 1px solid #888;
	width: 50%; /* Could be more or less, depending on screen size */
}
/* The Close Button */
.close {
	color: #aaa;
	float: right;
	font-size: 28px;
	font-weight: bold;
}

.close:hover, .close:focus {
	color: black;
	text-decoration: none;
	cursor: pointer;
}
#buttonModalGrp{
	float: right;
}
</style>


</head>
<body>

	<div id="formAll" class="container-fluid" style="margin-top:30px;">
		<form class="form-inline">
			<div class="form-group" style="margin-right:20px;">
				<label for="exampleInputName2">원료명</label> <input type="text"
					class="form-control" id="exampleInputName2" placeholder="원료명 입력">
			</div>
			<div class="form-group">
				<label for="exampleInputEmail2">입고시간</label> <input type="text"
					class="form-control" id="exampleInputEmail2"
					placeholder="입고년도 입력">
			</div>
			<div class="form-group">
				<input type="text" class="form-control" id="exampleInputEmail2"
					placeholder="입고시간 입력">
			</div>
			<button type="button" class="btn btn-info" id="searchBtn">검색</button>
		
		<br><br>
		
			<div class="form-group" style="margin-right:20px;">
				<label for="exampleInputName2">담당자</label> <input type="text"
					class="form-control" id="exampleInputName2" placeholder="담당자명 입력">
			</div>
			<div class="form-group">
				<label for="exampleInputEmail2">메뉴명</label>
				<select name="cars" id="cars" class="form-control">
        			<option th:each="menu : ${menuList}" th:value="${menu.menuCode}" th:text="${menu.menuName}"></option>
				</select>
			</div>
				
			</div>
			<div class="form-group" id="buttonGrp">
				<div class="btn-group">
					<button type="button" class="btn btn-danger" id="addBtn">추가</button>
					<button type="button" class="btn btn-success" id="modifyBtn">수정</button>
					<button type="button" class="btn btn-default" id="cancelBtn">취소</button>
				</div>
			</div>
		</form>


	</div>
	</form>
	<br>

	<div class="form-row">
		<div class="form-group">
			<div id="mtrGrid">
				<table id="mtrTable"
					class="table table-striped table-bordered table-hover">
					<thead>
		    <tr>
		      <th scope="col" style="text-align: center;">no</th>
		      <th scope="col" style="text-align: center;">입출구분</th>
		      <th scope="col" style="text-align: center;">입출일시</th>
		      <th scope="col" style="text-align: center;">원료코드</th>
		      <th scope="col" style="text-align: center;">원료명</th>
		      <th scope="col" style="text-align: center;">수량</th>
		      <th scope="col" style="text-align: center;">입출내용</th>
		      <th scope="col" style="text-align: center;">등록일시</th>
		      <th scope="col" style="text-align: center;">등록자</th>
		    </tr>
		  </thead>
		  <tbody>
		    <tr th:if="${not #lists.isEmpty(matstoreList)}" th:each="matstore, index : ${matstoreList}" style="text-align: center;">
		       <td th:text="${index.index}+1"></td>  
		       <td th:text="${matstore.strGubunCode}"></td>  
		       <td th:text="${matstore.strTime}"></td>
		       <td th:text="${matstore.mtrCode}"></td>
		       <td th:text="${matstore.mtrName}"></td>
		       <td th:text="${matstore.strQnt} +' 개'"></td>
		       <td th:text="${matstore.strDist}"></td>
		       <td th:text="${matstore.rgstDt}"></td>
		       <td th:text="${matstore.rgstUser}"></td>
		     </tr>
		     <tr th:unless="${not #lists.isEmpty(matstoreList)}">
		       <td colspan="7">조회된 결과가 없습니다.</td>
		     </tr>
		  </tbody>
					
				</table>
			</div>
		</div>
	</div>

	<!-- modal -->
	<!-- Trigger/Open The Modal -->


	<!-- The Modal -->
	

	<!-- Modal content -->
	<div id="myModal" class="modal" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-lg">
		<div class="modal-content" style="width:640px; min-height:300px; padding:20px;">
			<span class="close">&times;</span>
			<div class="container-fluid">
				<form class="form-inline" id="modalForm">
					<div class="form-group" style="margin-right:20px;">
						<label for="exampleInputName2">원료명</label> 
						<input type="text"
							class="form-control" id="materialName"
							placeholder="Jane Doe">
					</div>
					<div class="form-group">
						<label for="exampleInputEmail2">입출구분</label> 
						<select id="ioDivision" name="cars" class="form-control">
						  <option value="I" selected>입고</option>
						  <option value="O">출고</option>
						</select>
					</div>
				</form>
				<br>
				<form class="form-inline">
					<div class="form-group">
						<label for="exampleInputName2">입출고 근거</label> 
						<input type="text"
							class="form-control" id="ioContents"
							placeholder="Jane Doe">
					</div>
					<div class="form-group">
						<label for="exampleInputEmail2">입출고 수량</label> <input type="text"
							class="form-control" id="ioQtt"
							placeholder="3">
					</div>
					<br><br>
					<div class="form-group" id="buttonModalGrp">
						<div class="btn-group">
							<button type="button" class="btn btn-danger" id="saveBtn">저장</button>
							<button type="button" class="btn btn-default" id="cancelModalBtn">취소</button>
						</div>
					</div>
				</form>


			</div>
		</div>
		</div>
	</div>
	<!-- Get the modal -->
	<script>
		var modal = document.getElementById('myModal');

		var addBtn = document.getElementById("addBtn");
		var modifyBtn = document.getElementById("modifyBtn");
		var materialName = document.getElementById("materialName");
		var saveBtn = document.getElementById("saveBtn");
		var cancelBtn = document.getElementById("cancelBtn");
		var span = document.getElementsByClassName("close")[0];

		addBtn.onclick = function() {
			modal.style.display = "block";
			$("#materialName").val('');
			$("#ioQtt").val('');
			$("#ioContents").val('');
			$("#ioDivision option:eq(0)").prop("selected", true);
		}
		modifyBtn.onclick = function() {
			modal.style.display = "block";
			$("#materialName").val('');
			$("#ioQtt").val('');
			$("#ioContents").val('');
			$("#ioDivision option:eq(0)").prop("selected", true);
		}

		span.onclick = function() {
			modal.style.display = "none";
		}

		window.onclick = function(event) {
			if (event.target == modal) {
				modal.style.display = "none";
			}
		}
		
		saveBtn.onclick = function(){
			var mtrNameVal = $("#materialName").val();
			var strGubumCodeVal = $("#ioDivision option:selected").val();
			var strDistVal = $("#ioContents").val();
			var strQntVal = $("#ioQtt").val();
			$.ajax({
		        type:"POST",
		        url:"${pageContext.request.contextPath}/saveMatstore",
		        data : {mtrName: mtrNameVal,
		        		strGubunCode: strGubumCodeVal,
		        		strDist: strDistVal,
		        		strQnt: strQntVal},
		        dataType : "json",
		        success: function(data){
		            alert("정상적으로 처리되었습니다.");
		        },
		        error: function(xhr, status, error) {
		            alert("에러발생");
		        }  
		    });
		}
	</script>
</body>
</html>